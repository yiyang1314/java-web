<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.renting.dao.UserMapper">
	<sql id="sqlFeild">
		userid,loginname,loginpwd,phone,realname
	</sql>
	<sql id="insertsql">
		loginname,loginpwd,phone,realname
	</sql>

	<select id="findAll" resultType="com.renting.entity.Users">
		select  <include refid="sqlFeild"/>  from users	
	</select>
	
	<select id="findById" resultType="com.renting.entity.Users" parameterType="java.lang.Integer">
		select  <include refid="sqlFeild"/>  from users	where userid=#{userid}
	</select>

	<select id="findPageAll" resultType="com.renting.entity.Users" parameterType="java.util.Map">
		select  <include refid="sqlFeild"/>  from users	where ${column} like '%${keywords}%' limit 1,3
	</select>
	
	<select id="getCount" resultType="java.lang.Integer" parameterType="java.util.Map">
		select  count(1)  from users	where ${column} like '%${keywords}%' limit 1,3
	</select>
	<update id="update" parameterType="com.renting.entity.Users">
		update from users 
		<set>
			<if test="user.loginname!=null">loginname=#{user.loginname},</if>
			<if test="user.loginpwd!=null">loginpwd=#{user.loginpwd},</if>
			<if test="user.phone!=null">phone=#{user.phone},</if>
			<if test="user.realname!=null">realname=#{user.realname}</if>
		</set>
		where userid=#{userid}
	</update>
	<insert id="insert" parameterType="com.renting.entity.Users">
		insert into users(<include refid="insertsql"/>)values(
						#{loginname},
						#{loginpwd},
						#{phone},
						#{realname})
	
	</insert>
	
	<delete id="delete">
	 	delete from users where userid=#{userid}
	</delete>
	
	<delete id="delBatchIds" parameterType="java.util.List">
		delete from users where userid in
		<foreach collection="list" item="id" index="index" open="(" close=")" separator=",">
			#{id}		
		</foreach>
	</delete>
	
	<select id="login" resultType="com.renting.entity.Users" parameterType="java.util.Map">
		select  <include refid="sqlFeild"/>  from users	where loginname=#{username} and loginpwd=#{password}
	</select>
	
</mapper>